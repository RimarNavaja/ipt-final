<div class="card">
  <div class="card-header">
    <h2 class="mb-0">{{ id ? "EDIT" : "ADD" }} EMPLOYEE</h2>
  </div>
  <div class="card-body">
    <div class="alert alert-danger" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <div class="mb-4">
      <label class="form-label">Employee ID</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="employee.employeeId"
        [disabled]="!!id"
      />
    </div>

    <div class="mb-4">
      <label class="form-label">Account</label>
      <select
        class="form-select w-100"
        [(ngModel)]="employee.userId"
        (change)="onAccountChange($event)"
      >
        <option value="" disabled>-- Select Account --</option>
        <option *ngFor="let user of users" [ngValue]="user.id">
          {{ user.firstName }} {{ user.lastName }} ({{ user.email }})
        </option>
      </select>
    </div>

    <div class="mb-4">
      <label class="form-label">Position</label>
      <input type="text" class="form-control" [(ngModel)]="employee.position" />
    </div>

    <div class="mb-4">
      <label class="form-label">Department</label>
      <select
        class="form-select w-100"
        [(ngModel)]="employee.departmentId"
        (change)="onDepartmentChange($event)"
      >
        <option value="" disabled>-- Select Department --</option>
        <option *ngFor="let dept of departments" [ngValue]="dept.id">
          {{ dept.name }}
        </option>
      </select>
    </div>

    <div class="mb-4">
      <label class="form-label">Hire Date</label>
      <input
        type="date"
        class="form-control w-100"
        [(ngModel)]="employee.hireDate"
        [min]="minDate"
      />
    </div>

    <div class="mb-4">
      <label class="form-label">Status</label>
      <select class="form-select w-100" [(ngModel)]="employee.status">
        <option value="Active">Active</option>
        <option value="Inactive">Inactive</option>
      </select>
    </div>

    <div class="d-flex justify-content-end mt-4">
      <button class="btn btn-secondary me-2" (click)="cancel()">Cancel</button>
      <button class="btn btn-primary" (click)="save()">Save</button>
    </div>
  </div>
</div>
